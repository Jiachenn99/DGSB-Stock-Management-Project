{% extends "main/base.html" %}
{% block content %}
<style>
/* ---------------------------------------------------
    Dashboard - Cards
----------------------------------------------------- */

.card-body-icon {
    position: absolute;
    z-index: 0;
    top: -25px;
    right: -25px;
    font-size: 5rem;
    -webkit-transform: rotate(15deg);
    -ms-transform: rotate(15deg);
    transform: rotate(15deg);
}

  
@media (min-width: 576px) {
    .card-columns {
      column-count: 1;
    }
}
  
@media (min-width: 768px) {
    .card-columns {
      column-count: 2;
    }
}
  
@media (min-width: 1200px) {
    .card-columns {
      column-count: 2;
    }
}
  

.content-wrapper {
    min-height: calc(100vh - 56px);
    padding-top: 1rem;
}

.content-wrapper {
    overflow-x: hidden;
    background: white;
}

.o-hidden {
    overflow: hidden !important;
}
</style>
{% if item_lowStock > 0 %}
<div class="alert alert-warning alert-dismissible fade show" role="alert">
  <strong>Stock is low!</strong> {{ item_lowStock }} item(s) is/are low on stock!
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
{% endif %}
<div class="content-wrapper">
    <div class="container-fluid">
        <div class="row d-flex justify-content-center">
            <div class="col-xl-3 col-sm-6 mb-3">
                <div class="card text-white bg-primary o-hidden h-100">
                    <div class="card-body">
                        <div class="card-body-icon">
                            <i class="fas fa-warehouse"></i>
                        </div>
                        <div class="mr-5"><Strong><h1>{{ total_items }}</h1></Strong> Total Items
                        </div>
                        </div>
                        <a class="card-footer text-white clearfix small z-1" href="/index">
                        <span class="float-left">View Details</span>
                        <span class="float-right">
                            <i class="fa fa-angle-right"></i>
                        </span>
                        </a>
                    </div>
                </div>

            {% comment %} Card 2
            <div class="col-xl-3 col-sm-6 mb-3">
                <div class="card text-white bg-warning o-hidden h-100">
                    <div class="card-body">
                        <div class="card-body-icon">
                            <i class="fa fa-fw fa-list"></i>
                        </div>
                        <div class="mr-5"><Strong><h1>11</h1></Strong> Recent Updates </div>
                    </div>
                    <a class="card-footer text-white clearfix small z-1" href="#">
                    <span class="float-left">View Details</span>
                    <span class="float-right">
                        <i class="fa fa-angle-right"></i>
                    </span>
                    </a>
                </div>
            </div> {% endcomment %}
            <div class="col-xl-3 col-sm-6 mb-3">
                <div class="card text-white bg-success o-hidden h-100">
                    <div class="card-body">
                        <div class="card-body-icon">
                            <i class="fa fa-fw fa-shopping-cart"></i>
                        </div>
                        <div class="mr-5"><Strong><h1>{{ totalPurchases }}</h1></Strong> Total Purchases </div>
                    </div>
                        <a class="card-footer text-white clearfix small z-1" href="/purchasing">
                        <span class="float-left">View Details</span>
                        <span class="float-right">
                            <i class="fa fa-angle-right"></i>
                        </span>
                        </a>
                </div>
            </div>
            <div class="col-xl-3 col-sm-6 mb-3">
                <div class="card text-white bg-warning o-hidden h-100">
                    <div class="card-body">
                        <div class="card-body-icon">
                            <i class="fa fa-fw fa-support"></i>
                        </div>
                        <div class="mr-5"><Strong><h1>{{ item_lowStock }}</h1></Strong> Low on stock </div>
                        </div>
                        <a class="card-footer text-white clearfix small z-1" data-toggle="collapse" href="#multiCollapseExample1">
                        <span class="float-left">View Details</span>
                        <span class="float-right">
                            <i class="fa fa-angle-right"></i>
                        </span>
                        </a>
                    </div>
                </div>
            </div>
    </div>

    <!-- Tables here -->
    <div class="collapse multi-collapse" id="multiCollapseExample1">
        <div class="card card-body">
            {% if isIrrigationLow %}
            <br>
            <br>
            <h2>Irrigation</h2>
            <!-- table -->
            <table id="table1" class="table table-hover table-bordered mt-4 shadow p-2 mb-2 bg-white">
                
                <!-- headers -->
                <thead>
                    <tr>
                        <th> # </th>
                        <th> Name </th>
                        <th> Quantity </th>
                        <th> Threshold </th>
                        <th> Price/Unit </th>
                        <th> Description </th>
                        <th> Supplier </th>
                    </tr>
                </thead>    
            
                <!-- results -->
                <tbody>
                    {% for queryset in irrigation_results %}
                        {% for dict in queryset.values %}
                        <tr>
                            {% for value in dict.values %}
                                <td>{{ value }}</td>
                            {% endfor %}
                        </tr>
                        {% endfor %}  
                    {% endfor %}
                </tbody>
            
            </table>
            {% endif %}

            {% if isPlantationLow %}
            <br>
            <br>
            <h2>Plantation</h2>
            <!-- table -->
            <table id="table1" class="table table-hover table-bordered mt-4 shadow p-2 mb-2 bg-white">
        
                <!-- headers -->
                <thead>
                    <tr>
                        <th> # </th>
                        <th> Name </th>
                        <th> Quantity </th>
                        <th> Threshold </th>
                        <th> Price/Unit </th>
                        <th> Description </th>
                        <th> Supplier </th>
                    </tr>
                </thead>    
            
                <!-- results -->
                <tbody>
                    {% for queryset in plantation_results %}
                        {% for dict in queryset.values %}
                        <tr>
                            {% for value in dict.values %}
                                <td>{{ value }}</td>
                            {% endfor %}
                        </tr>
                        {% endfor %}   
                    {% endfor %}
                </tbody>
            
            </table>
            {% endif %}

            {% if isSparepartsLow %}
            <br>
            <br>
            <h2>Spareparts</h2>
            <!-- table -->
            <table id="table1" class="table table-hover table-bordered mt-4 shadow p-2 mb-2 bg-white">
                
                <!-- headers -->
                <thead>
                    <tr>
                        <th> # </th>
                        <th> Name </th>
                        <th> Vehicle ID assigned </th>
                        <th> Unit Price </th>
                        <th> Quantity </th>
                        <th> Threshold </th>
                        <th> Supplier </th>
                    </tr>
                </thead>    
            
                <!-- results -->
                <tbody>
                    {% for queryset in spareparts_results %}
                        {% for dict in queryset.values %}
                        <tr>
                            {% for value in dict.values %}
                                <td>{{ value }}</td>
                            {% endfor %}
                        </tr>
                        {% endfor %}   
                    {% endfor %}
                </tbody>
            
            </table>
            {% endif %}

        </div>
      </div>

</div>

{% endblock content %}