
<script>
    $(document).ready(function(){
      var selected_subcategory = 'Tools';
      $("select.form-control").change(function(){  // event handler for dropdown onchange
        selected_subcategory = $("select.form-control").children("option:selected").val();  //store selected dropdown value
        $("#current-table").text(selected_subcategory);  //display selected dropdown value
        if(selected_subcategory == "Tools") {
          $("#table1 tbody:first").html("{% for dicts in results.results_Tools %}<tr>{% for value in dicts.values %}<td>{{ value }}</td>{% endfor %}</tr>{% endfor %}");
        } else if(selected_subcategory == "Consumables") {
          $("#table1 tbody:first").html("{% for dicts in results.results_Consumables %}<tr>{% for value in dicts.values %}<td>{{ value }}</td>{% endfor %}</tr>{% endfor %}");
        } else if(selected_subcategory == "Fungicide") {
          $("#table1 tbody:first").html("{% for dicts in results.results_Fungicide %}<tr>{% for value in dicts.values %}<td>{{ value }}</td>{% endfor %}</tr>{% endfor %}");
        } else{
          $("#table1 tbody:first").html("{% for dicts in results %}<tr>{% for value in dicts.values %}<td>{{ value }}</td>{% endfor %}</tr>{% endfor %}");
        } 
      });
      $("#add1").hover(function(){  // event handler for hovering over add button
        $(this).attr("href", "/addItem/" + selected_subcategory);  // this reads selected dropdown value and passes it to view function
      });
    });
</script>

<div class="d-flex justify-content-between">
    <!-- selection of subcategories -->
    <div class="p-2">
        <form>
            <div class="form-group">
                <select class="form-control" id="sel1">
                    <!-- Iterates through list of categories from views.py to display -->
                    {% for category in cat_list %}
                        {% if cat_list.0 %}
                        <!-- First item of the list is the active unit -->
                            <option id ="active_unit"> {{ category }}</option>
                        {% else %}
                            <option>{{ category }}</option>
                        {% endif %}
                    {% endfor %}
                </select>
            </div>
        </form>
    </div>

    <!--display current subcategory-->
    <div class="p-2">
        <h2 id ="current-table">{{ cat_list.0 }}</h2>
    </div>

    <!-- add item button -->
    <div class="p-2">
        <a href="" class="btn btn-primary" role="button" id="add1">Add Item</a>
    </div>

</div>

<table id="table1" class="table table-hover table-bordered mt-4 shadow p-2 mb-2 bg-white">
    <thead>
        <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Quantity</th>
        <th>Unit Price</th>
        <th>Description</th>
        <th>Purchasing ID</th>
        </tr>
    </thead>
    <tbody>
        <!-- Implement if else statement to check for table -->
        {% if label == "Irrigation" %}
            {% for dicts in results %}
            <tr>
                {% for value in dicts.values %}
                    <td>{{ value }}</td>
                {% endfor %}
            </tr>
            {% endfor %}
        {% else %}
            {% for dicts in results.results_Tools %}
            <tr>
                {% for value in dicts.values %}
                    <td>{{ value }}</td>
                {% endfor %}
            </tr>
            {% endfor %}
        {% endif %}
    </tbody>
</table>

